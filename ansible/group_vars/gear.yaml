# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
---
# openstack.gearman
gear_file_gear_service_config_src: gear/etc/systemd/system/gear.service.d/override.conf.j2

# TODO(pabelanger): Remove once https://review.openstack.org/558938 is merged
gear_pip_extra_args: statsd
gear_pip_version: 0.13.0
gear_pip_virtualenv_python: python3
gear_pip_virtualenv: "/opt/venv/gear-{{ gear_pip_version }}"

gear_file_ssl_ca_content: |
  -----BEGIN CERTIFICATE-----
  MIIDnTCCAoWgAwIBAgIUScVFAQvRV7h6xKq/kmkKAyREHqgwDQYJKoZIhvcNAQEL
  BQAwXjELMAkGA1UEBhMCQ0ExEDAOBgNVBAgMB09udGFyaW8xEDAOBgNVBAcMB1Rv
  cm9udG8xFjAUBgNVBAoMDVBhdWwgQmVsYW5nZXIxEzARBgNVBAMMCmdlYXJtYW4t
  Y2EwHhcNMTgxMjIwMTU1MzU4WhcNMjgxMjE3MTU1MzU4WjBeMQswCQYDVQQGEwJD
  QTEQMA4GA1UECAwHT250YXJpbzEQMA4GA1UEBwwHVG9yb250bzEWMBQGA1UECgwN
  UGF1bCBCZWxhbmdlcjETMBEGA1UEAwwKZ2Vhcm1hbi1jYTCCASIwDQYJKoZIhvcN
  AQEBBQADggEPADCCAQoCggEBAKuVM7S1UkBQmBwvHu5WVHgOb1OAFbcCAv0qyDrj
  mUXVenvGzx1v4GiQt+KFuk8+3oylZ4cvWizRwokxMMrqYutJM5o5dd8rkmRudr1h
  ZzpPQAfcNGGF95sFH6OGmjjBR3cMbeFr+ahPeE5Y0BGzF5kIXKg084p6d/T726b3
  NezR6H4d6nhXR1J1q6m9MhukJZi7gqEN1CQT7kJopqNzrStpYMw+mjLfy6XCPBs/
  aQWF9cQ7fc+3m8Muw/Ve5w651Gt8l41c3y6yZZtCQF+ulgEoJQ7kQaWqAEz5eb2G
  AyUOkTXOVo9oJfDeX6x8GBLeMWMkOPVDfaL7sO2oMqBLyqMCAwEAAaNTMFEwHQYD
  VR0OBBYEFOG5sC1enko0Uah+4QrBg+u9QG+VMB8GA1UdIwQYMBaAFOG5sC1enko0
  Uah+4QrBg+u9QG+VMA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEB
  AKKR1wSCifMs38dYDLPlR5VRQFvvLpa4tKMAL8tSUv25MeR1NLtQbcd/vAvbJtSk
  g+8743LGl8ogedYmDfYG6403wzr9Ak6N2rwwvdyOAZwYvO9mjSYq+VTiQJyVG4oo
  s/utcr3e4kWLcwFqw3xIQ5C0DClqTHyWUC+fEFklayjYOhLQjBHAdiy6mFxqsqI/
  tJ6u+gMt5luWVJB7/cyBfXycZmRkGq6Ki/mefinSEIVu+H6KSwwRdSNUPoM1jaz/
  OPRjh+0134CTJauzO9G42+BOsezilr60JpwqwvDYJeK6msulIrz6UVAndVNFiPWW
  +4sRGhA+3O8RDdd0570Pvjc=
  -----END CERTIFICATE-----

gear_file_ssl_cert_content: |
  -----BEGIN CERTIFICATE-----
  MIIDRzCCAi8CFBWNpb7BZT2FCAqHcfmXpvKAkqs5MA0GCSqGSIb3DQEBCwUAMF4x
  CzAJBgNVBAYTAkNBMRAwDgYDVQQIDAdPbnRhcmlvMRAwDgYDVQQHDAdUb3JvbnRv
  MRYwFAYDVQQKDA1QYXVsIEJlbGFuZ2VyMRMwEQYDVQQDDApnZWFybWFuLWNhMB4X
  DTE4MTIyMDE1NTcwMloXDTI4MTIxNzE1NTcwMlowYjELMAkGA1UEBhMCQ0ExEDAO
  BgNVBAgMB09udGFyaW8xEDAOBgNVBAcMB1Rvcm9udG8xFjAUBgNVBAoMDVBhdWwg
  QmVsYW5nZXIxFzAVBgNVBAMMDmdlYXJtYW4tc2VydmVyMIIBIjANBgkqhkiG9w0B
  AQEFAAOCAQ8AMIIBCgKCAQEAyVZUrEYQCaanbUL49Kkfmm2Y9LkWtpHjVar8fsoV
  i7R5l5EEXZRG59+uPNupXxyhTyF7rn/SgnHkBlpQ+jozfmAp0Wsl5bkkVSyBihaz
  PRBbtI4CaYLDc66Ox10hMbCEw7xcMCA8Mgb2RDhMjVbErxvBlSYDTPV8/QjUD2vb
  nuZ3GKgisItRVfMiNb5gE4IFyRPRVnVdyT+ZgvauEc3kUJKabQtkL/yAYaZz5FwU
  Hm+dIzokdqIptrlcXiN+ltQEw4Nlb8KhGmrrDWatGQtPX9zuz87VXsa+fSiXA8hr
  jvTyr/30nvNr1RA9bf+GyTkOv1p23J7fleW3i/2AYx5Q6wIDAQABMA0GCSqGSIb3
  DQEBCwUAA4IBAQAjeZn5mfz1nrKa9Gx4ax/yHQuZmIwj9hNOoNcg2HPp2yDFGi2w
  A9d314Zm02XFKANBcB7B5ieBEkduwVN3VHV4pnKKKPomts67InHCrecDx1mqbmEB
  iD3ROGS6BTJqOzr39cu7m9vzqTV32If/vkNowf44rK/zOAv1r5bCzpybidi8RN5o
  NCmaK1yirhPwtRkx7c3NLze+8IfL1oBKh5tr0mDMo9QjJXHqv7rUltiniHVnVC2c
  TSyvjgXcG5jjTR3JFK7NPmu5XK55joKOqtMXepOGOJxW0FMmfsEvLxfjd10XiLp6
  JUDuMD8PmmaidmjICjNx3BaSodR344/+p0KF
  -----END CERTIFICATE-----

gear_file_ssl_key_content: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  35326539303036356633343931626530363366333161333538393632346661363335626638313731
  6161353930306233393736373330373030336233326533340a666537613736326339643830303338
  38663334666438333462386663316662313436326339333037353833656537353037653837343762
  3764383139366334310a366164623035303763643032656566663462663433623438623761326561
  37373366306539623437653766613264626232303932613463636363303365353531343063393665
  62616439623930616233356136336562653533353538393235373862626562333336393531383062
  32623361343663623138303231396661366436626165633764336261383133623837653166666133
  65616565626531366632623338646634643730363439343731303731636237316133313538343435
  39313335653131343563623163363038656665396535383162303139356464303730316137313434
  62316364393530383236376465613536373662306262366336393763363066306131663932656436
  64386664346231386461623837366138343534613266363030303061376636386132343138323330
  37643337623962393264376665633161346436626537303936333762343065306334623038633431
  33333433313832626639316636313532366565666430663863396264373564376466383139633463
  33306464633831613634383538383238356632386336633637326635386330646361663231643734
  31636431666562333365376331346439346166616561633162353130313831653634653565643239
  66613238323664333834633938313062373964313833343932373838656666393665386135363862
  35396136666638363464316261393563653234616238386163313365306665376635353132346333
  34663766343065393662353464333638383832643835643837356334313261656165393562366566
  35633465323765646536333432643064643833333262363263366436353538306161616466663265
  66613031363061346139653337383339306136303835633766666539663638356161326336353263
  31386231653763343265663831343631313233363637366531393639393263666335313234656339
  39353262343733383735383537393432646130623266616434346463623738366165636437373039
  31313066633363643132663866636662643430656564636332303535363161663161616437393063
  38646232343732613638643462343430653335373365333233336565666238303031343138376431
  64353737326237323038336362356636646630336336616632636166643938613034333238653263
  38303735373034663638346236373664373063616461303331643838393562383335346434626430
  63333236346166323963643731366232656164313063333431643137303165393561663730346238
  33653939343761303363356466666463323961323165333133643566616361373331663138363436
  64653533316332643232306365666562613837623538333363333435333633643864626333633565
  62663538616330653634396537383165396261393031323639653566343330333337663565346130
  63613334336230343335363564313266303831643430363336336663623831613162373965656163
  33396131626137666631323039626437373136303264353763343034323537646664613065323466
  62383833616131386632383332363636376662333261376235323938336661373234366166633338
  31303033333162373565363439346538663034356564633664393165386162316565336537383930
  65353262653532396166616633356336366664623038653866633739646136353034656564306334
  61376337653363343761643535633833343863336236626630313337663832613133343636393931
  31393466386561323038623639653236366434306336643636653365323733303939366139623430
  38326432653039343839363662313963366466303166616534653534313637383635653733313735
  39323066626333613836373861636336326465343632373765366262633661356139666530383532
  64636336393235366237323162663265386432333861396138363038306231303335343539333433
  66633030646237386132663935656436393965343239386135323533323739353263613063353163
  39303632643165353863383231356562323934623736323038313831626538343863343462666632
  62653534313933316466383363396265663566656130393338646434393131643664643038363862
  32356335363638643836653336376662306232316532336363333431303430333634323934313732
  64356365363464313063313334393231306535613033653137616464633139636533623131336261
  34343761646138646261303237656133373236393337616235326635623632346237666565306164
  63363566626531623839633534393031386430666534323266336537326530323166616531323638
  32336138393738393866363566373466336139346630353033366564643736383335303465333637
  64343435393464316461636530623631343433613436353163313562643038346361383062613466
  36643139373861353936353632326536623364343331353666303563626366663866666532623535
  34346366623437343037663339666464616438323536646635306431333763303866366637383461
  30656637373430313365383030393334376366393862666265663332323333393962626131383962
  37333537396135636464666166376534303539333336616431343138323833613561316537633962
  36396137356436363936303263393663316635306366613662373830353139666365636266663036
  61363935336530363663653435313036303434663562393439303337356661323232663635313835
  36343865663765316261343861633134396231663162353230313930353738323366323563346231
  31363533653265613834353431343663616166313962646263613835643634303561326163613737
  65333166643866383961376238636164376532333563363731323962303138336331313539336639
  31383463656466323938613065373933373665623133633539303261313964303764646332393736
  35653339346139656164353031623536316131376565626631656436346137303333333664303164
  35326563636239323335353666633361366237353639326161623832333930303235653566646534
  62373466396264363938373861346163666461643330393464643438363232376232363439663632
  33303163326234303835653334393932383762643138366136356539393661326266393734643531
  32333765666533336665313262633531336663616336666436656462323664373939626465373333
  32343131333561343931656132353763333662646339363338613535656537323063396466396463
  30356133326435373766343964323930323164343834646263613832656332336463396339393737
  36666139373865396230636332396334373336363464393063666164643834323161393230613933
  66643961663436376338636230306132663465333233613137623637653333626135643635346339
  30353233653637376466386134323763613139383834626662393931366163666337616230613934
  39303839333063373739363735313531646439653631643832306464653437633734376166333033
  31323763316664303566643135646136313034313366623864383233626666383764313534383165
  38623764323335653439326135653032623061663638313061623236666235383966623534346439
  62663033383162636439393438653037646466323730356133343438323361336565326537616130
  33663730626334376231656537626331663964616435316435383666336631633465613733356633
  65316230373462613565633564363466623539636136306539666564306336633534303935626335
  61636661306263326233313533616236323966343232306161343932663832636636393433306438
  36633336373965663536326430353037323663336266326135333432656464643430336561386435
  35366237623461333861663662316463623264376330636638316535323838306465626434613663
  34323864613363353930663034346665633633346337313165376239323766616137616131613462
  32356465393030613435323865363364613664356166653431393862353239636165666134356363
  31343337383132613261626137353461303537383336303339306136393934396565623933303035
  64313530656132333161303139363965313065626235303936393838363334353831363636353863
  33636264613730663830303562376162336138346635643336343934346636343033383166306562
  34396133653733613564333236636137663363383639613337663933343732393061663566336133
  38383535333062313463386363633636626365656131653134376334613361663265306230396639
  34666333633166333365303534636534666139343761323631616638633731353838396334366432
  33636161613461613264313661633731633637623935643532353436666538303933623235386161
  30636432393161393866623034383661663530346164663963346461366636366634646235643937
  62616130323231373963333866616335356137313036376235366165383638633034

# openstack.logrotate
logrotate_configs:
  - name: gear
    log: /var/log/gear/debug.log /var/log/gear/gear.log
    options:
      - compress
      - missingok
      - rotate 7
      - daily
      - notifempty

iptables_allowed_hosts:
  # zuul-executor
  - address: ze01.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730

  - address: ze02.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730

  # zuul-merger
  - address: zm01.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730

  - address: zm03.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730

  # zuul-scheduler
  - address: zs01.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730

  # zuul-web
  - address: zw01.sjc1.vexxhost.zuul.ansible.com
    protocol: tcp
    port: 4730
